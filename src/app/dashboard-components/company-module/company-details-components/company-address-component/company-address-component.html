<div class="main-container">

<!-- SECTION 1: Title and Add Button -->
<div class="section section-title">
  <div class="title-content">
    <h2>{{ label.COMMON.ADDRESSES || 'Addresses' }}</h2>
  </div>
  <button mat-raised-button color="primary" (click)="onAdd()">
    <mat-icon>add</mat-icon> {{ label.COMMON.ADD_ADDRESS || 'Add Address' }}
  </button>
</div>

<!-- SECTION 2: Address List -->
<div class="section section-content">
  <!-- Loading State -->
  @if (showLoading) {
    <div class="loading-container">
      <mat-spinner></mat-spinner>
    </div>
  }

  <!-- Empty State -->
  @if (!showLoading && (!companyAddresses || companyAddresses.length === 0)) {
    <div class="empty-table">
      <mat-icon class="empty-icon">inbox</mat-icon>
      <span class="empty-text">{{ label.COMMON.NO_RECORDS || 'No records available' }}</span>
    </div>
  }

  <!-- Address Items -->
  @if (!showLoading && companyAddresses && companyAddresses.length > 0) {
    <div class="content-list">
      @for (companyAddress of companyAddresses; track companyAddress.id) {
        <div class="content-item">

          <!-- Address Icon -->
          <div class="item-icon">
            <div class="icon-container">
              <mat-icon>location_on</mat-icon>
            </div>
          </div>

          <!-- Address Info -->
          <div class="item-content">
            <div class="primary-text">
              @if (companyAddress.addressLine1) {
                <span>{{companyAddress.addressLine1}}</span>
              }
              @if (companyAddress.addressLine2) {
                <span>, {{companyAddress.addressLine2}}</span>
              }
              @if (companyAddress.addressLine3) {
                <span>, {{companyAddress.addressLine3}}</span>
              }
              @if (companyAddress.addressPrimary) {
                <span class="primary-badge">{{ label.COMMON.PRIMARY || 'Primary' }}</span>
              }
            </div>
            <div class="secondary-text">
              @if (companyAddress.poBoxNumber) {
                <div>{{ companyAddress.poBoxNumber }}</div>
              }
              @if (companyAddress.poBoxCity && cities) {
                <div>{{ cities.get(companyAddress.poBoxCity) }}</div>
              }
              @if (companyAddress.poBoxCountry && countries) {
                <div>{{ countries.get(companyAddress.poBoxCountry) }}</div>
              }
            </div>
          </div>

          <!-- Actions -->
          <div class="item-actions">
            <button mat-icon-button [matMenuTriggerFor]="addressMenu">
              <mat-icon>more_vert</mat-icon>
            </button>
            <mat-menu #addressMenu="matMenu">
              <button mat-menu-item (click)="onEdit(companyAddress)">
                <mat-icon>edit</mat-icon>
                <span>{{ label.COMMON.EDIT_ADDRESS || 'Edit Address' }}</span>
              </button>
              <button mat-menu-item [confirmDelete]="getRemoveCallback(companyAddress.id!)">
                <mat-icon>delete</mat-icon>
                <span>{{ label.COMMON.DELETE_ADDRESS || 'Delete Address' }}</span>
              </button>
            </mat-menu>
          </div>

        </div>
      }
    </div>
  }
</div>

</div>
