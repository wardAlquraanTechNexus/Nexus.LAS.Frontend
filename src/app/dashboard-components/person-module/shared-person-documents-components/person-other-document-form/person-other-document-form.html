<div *ngIf="isLoading" class="loading-overlay">
  <mat-spinner diameter="40"></mat-spinner>
</div>

<form class="dialog-content" [formGroup]="formGroup">
  <div class="upload-area" (drop)="onFileDrop($event)" (dragover)="onDragOver($event)" (dragleave)="onDragLeave($event)"
    [class.dragover]="isDragging">
    <label class="upload-button">
      <input type="file" accept=".svg,.png,.jpg,.jpeg,.pdf" (change)="onFileSelected($event)" hidden />
      <a mat-raised-button color="primary" type="button">
        Click to Upload
      </a>
    </label>

    <p>or drag and drop</p>
    <small>SVG, PNG, JPG, or PDF (max 3MB)</small>
  </div>

  <div *ngIf="selectedFile" class="file-info">
    <mat-icon>description</mat-icon>
    {{ selectedFile.name }} ({{ selectedFile.size / 1024 | number:'1.0-0' }} KB)
  </div>
  <div class="row mt-2">
    <mat-form-field appearance="outline" class="full-width col-12">
      <mat-label>Type</mat-label>
      <mat-select formControlName="documentType" required>
        <mat-option value="passport">Passport</mat-option>
        <mat-option value="national_id">National ID</mat-option>
        <mat-option value="driver_license">Driver License</mat-option>
      </mat-select>
      <mat-error *ngIf="formGroup.get('documentType')?.hasError('required') && formGroup.get('documentType')?.touched">
        Document Type is required
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width col-12">
      <mat-label>Description</mat-label>
      <input matInput formControlName="documentDescription" required />
      <mat-error *ngIf="formGroup.get('documentDescription')?.hasError('required') && formGroup.get('documentDescription')?.touched">
        Description is required
      </mat-error>
    </mat-form-field>
  </div>
</form>