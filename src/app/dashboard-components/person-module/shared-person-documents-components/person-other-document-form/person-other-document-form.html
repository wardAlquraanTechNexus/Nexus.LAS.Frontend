<div *ngIf="isLoading" class="loading-overlay">
  <mat-spinner diameter="40"></mat-spinner>
</div>

<form class="dialog-content" [formGroup]="formGroup">
  <div class="upload-area" (drop)="onFileDrop($event)" (dragover)="onDragOver($event)" (dragleave)="onDragLeave($event)"
    [class.dragover]="isDragging">
    <label class="upload-button">
      <input type="file" accept=".svg,.png,.jpg,.jpeg,.pdf" (change)="onFileSelected($event)" hidden />
      <a mat-raised-button color="primary" type="button">
        Click to Upload
      </a>
    </label>

    <p>or drag and drop</p>
    <small>SVG, PNG, JPG, or PDF (max 3MB)</small>
  </div>

  <div *ngIf="selectedFile" class="file-info">
    <mat-icon>description</mat-icon>
    {{ selectedFile.name }} ({{ selectedFile.size / 1024 | number:'1.0-0' }} KB)
  </div>
  <div class="row mt-2">
     <div class="col-6">
      <select-auto-complete 
          *ngIf="otherDocumentTypesFn" 
          [controlName]="'documentType'" 
          [fnGet]="otherDocumentTypesFn"
          [formGroup]="formGroup" 
          [label]="'Document Type'" 
          [keyToShow]="'name'" 
          [valueKey]="'id'"
          [withNullOption]="false">
      </select-auto-complete>
      <div class="text-danger" *ngIf="formGroup.get('documentType')?.invalid && formGroup.get('documentType')?.touched">
        Document Type is required
      </div>
    </div>

    <mat-form-field appearance="outline" class="full-width col-12">
      <mat-label>Description</mat-label>
      <input matInput formControlName="documentDescription" placeholder="Enter document description..." required />
      <mat-error *ngIf="formGroup.get('documentDescription')?.hasError('required') && formGroup.get('documentDescription')?.touched">
        Description is required
      </mat-error>
    </mat-form-field>
  </div>
</form>