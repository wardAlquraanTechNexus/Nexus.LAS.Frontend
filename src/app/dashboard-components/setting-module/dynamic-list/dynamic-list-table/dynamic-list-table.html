<div class="nexus-table-container">
    <!-- Modern Table Header -->
    <div class="nexus-table-header">
        <!-- Breadcrumb Navigation -->
        <div class="breadcrumb-container">
            <nav class="breadcrumb">
                <a (click)="onPathClick(null)" class="breadcrumb-link">
                    <mat-icon class="breadcrumb-icon">home</mat-icon>
                    Root
                </a>
                <ng-container *ngFor="let parent of parents">
                    <mat-icon class="breadcrumb-separator">chevron_right</mat-icon>
                    <a (click)="onPathClick(parent)" class="breadcrumb-link">
                        {{ parent.name }}
                    </a>
                </ng-container>
            </nav>
        </div>

        <!-- Actions Section -->
        <div class="table-actions">
            <!-- Search Input -->
            <div class="search-container">
                <mat-form-field class="search-field" appearance="outline">
                    <mat-label>Search by name</mat-label>
                    <input matInput [(ngModel)]="params.name" (keyup.enter)="onSearchByName()" 
                           placeholder="Enter name" autocomplete="off" />
                    <mat-icon matSuffix class="search-icon">search</mat-icon>
                </mat-form-field>
            </div>

            <!-- Add New Button -->
            <button mat-flat-button class="add-button" (click)="onAddNew()">
                <mat-icon>add</mat-icon>
                Add New
            </button>
        </div>
    </div>


    <!-- Tree Component -->
    <app-shared-tree-component *ngIf="!showLoading" [treeData]="treeData" (addEmitter)="onAddNew()"
        (editEmitter)="onEdit($event)" (deleteEmitter)="onDelete($event)"
        (viewEmitter)="onView($event)"></app-shared-tree-component>

    <!-- Loading Spinner -->
    <div class="loading-container" *ngIf="showLoading">
        <mat-progress-spinner mode="indeterminate" diameter="50" color="primary"></mat-progress-spinner>
        <p class="loading-text">Loading...</p>
    </div>

    <!-- Modern Pagination -->
    <div class="nexus-pagination">
        <!-- Previous Button -->
        <button mat-stroked-button class="pagination-btn" (click)="onPrev()" [disabled]="params.page === 0">
            <mat-icon>chevron_left</mat-icon>
            Previous
        </button>

        <!-- Pagination Info -->
        <div class="pagination-info">
            <div class="page-info">
                Page <span class="highlight">{{ params.page + 1 }}</span> 
                of <span class="highlight">{{ !dynamicLists.totalPages ? 1 : dynamicLists.totalPages }}</span>
            </div>
            <div class="records-info">
                <span class="info-label">Page Size:</span> 
                <span class="highlight">{{ params.pageSize }}</span>
                <span class="divider">|</span>
                <span class="info-label">Total Records:</span> 
                <span class="highlight">{{ dynamicLists.totalRecords }}</span>
            </div>
        </div>

        <!-- Next Button -->
        <button mat-stroked-button class="pagination-btn" (click)="onNext()"
                [disabled]="(params.page + 1) >= dynamicLists.totalPages">
            Next
            <mat-icon>chevron_right</mat-icon>
        </button>
    </div>
</div>