<div class="main-container">

  <!-- SECTION 1: Title and Records -->
  <div class="section section-title">
    <div class="title-content">
      <h2>Menus</h2>
    </div>
    <button mat-raised-button color="primary" (click)="onAddNew()">
      <mat-icon>add</mat-icon> Add Menu
    </button>
  </div>

  <!-- SECTION 2: Filters and Actions -->
  <div class="section section-filters">
    <div class="filters">
      <!-- Breadcrumb Navigation -->
      <div class="breadcrumb-container">
        <nav class="breadcrumb">
          <a (click)="onPathClick(null)" class="breadcrumb-link">
            <mat-icon class="breadcrumb-icon">home</mat-icon>
            Root
          </a>
          <ng-container *ngFor="let parent of parents">
            <mat-icon class="breadcrumb-separator">chevron_right</mat-icon>
            <a (click)="onPathClick(parent)" class="breadcrumb-link">
              {{ parent.name }}
            </a>
          </ng-container>
        </nav>
      </div>

      <!-- Search Input -->
      <mat-form-field appearance="outline" class="search">
        <mat-label>Search by name</mat-label>
        <input matInput [(ngModel)]="params.name" (keyup.enter)="onSearchByName()" placeholder="Enter name">
        <mat-icon matSuffix>search</mat-icon>
      </mat-form-field>

    </div>
  </div>

  <!-- SECTION 3: Data Grid -->
  <div class="section section-data">
    <!-- Loading -->
    <div *ngIf="showLoading" class="loading">
      <mat-spinner></mat-spinner>
    </div>

    <!-- Tree Component -->
    <app-shared-tree-component *ngIf="!showLoading" [treeData]="treeData" (addEmitter)="onAddNew()"
        (editEmitter)="onEdit($event)" (deleteEmitter)="onDelete($event)"
        (viewEmitter)="onView($event)"></app-shared-tree-component>

    <!-- Modern Pagination -->
    <div class="nexus-pagination" *ngIf="!showLoading">
        <!-- Previous Button -->
        <button mat-stroked-button class="pagination-btn" (click)="onPrev()" [disabled]="params.page === 0">
            <mat-icon>chevron_left</mat-icon>
            Previous
        </button>

        <!-- Pagination Info -->
        <div class="pagination-info">
            <div class="page-info">
                Page <span class="highlight">{{ params.page + 1 }}</span> 
                of <span class="highlight">{{ !menus.totalPages ? 1 : menus.totalPages }}</span>
            </div>
            <div class="records-info">
                <span class="info-label">Page Size:</span> 
                <span class="highlight">{{ params.pageSize }}</span>
                <span class="divider">|</span>
                <span class="info-label">Total Records:</span> 
                <span class="highlight">{{ menus.totalRecords }}</span>
            </div>
        </div>

        <!-- Next Button -->
        <button mat-stroked-button class="pagination-btn" (click)="onNext()"
                [disabled]="(params.page + 1) >= menus.totalPages">
            Next
            <mat-icon>chevron_right</mat-icon>
        </button>
    </div>
  </div>
</div>