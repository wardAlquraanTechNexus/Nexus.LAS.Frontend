<mat-toolbar color="primary" class="page-header">
    <span class="page-title">Users Groups</span>
    <span class="flex-spacer"></span>
    <span class="records-count">{{ data.totalRecords || 0 }} Records</span>
    <button mat-raised-button color="accent" (click)="onAddNew()">
        <mat-icon>add</mat-icon>
        Add User Group
    </button>
</mat-toolbar>
<div class="content-container">


    <form *ngIf="formGroup" [formGroup]="formGroup" class="row">

        <div class="col-6">
            <select-auto-complete *ngIf="loadMenusFn" [controlName]="'menuId'" [fnGet]="loadMenusFn"
                [formGroup]="formGroup"  [label]="'Menu'" [keyToShow]="'name'" [valueKey]="'id'" (selectEmitter)="onSelectMenu($event)">
            </select-auto-complete>

        </div>

        <div class="col-6">
            <select-auto-complete *ngIf="loadGroupFn" [controlName]="'groupId'" [fnGet]="loadGroupFn"
                [formGroup]="formGroup"  [label]="'Group'" [keyToShow]="'groupName'"
                [valueKey]="'id'" (selectEmitter)="onSelectGroup($event)">
            </select-auto-complete>


        </div>
    </form>
    <!-- Loading Spinner -->
    <div *ngIf="showLoading" class="loading-container">
        <mat-spinner diameter="40" strokeWidth="4" color="accent"></mat-spinner>
    </div>

    <!-- Data Table -->
    <app-shared-table *ngIf="!showLoading" [displayedColumns]="displayColumns" [paginateResult]="data"
        [action]="actionButtonsTemplate" (onChangePage)="changePage($event)" (onSortChangeEvent)="changeSort($event)">
    </app-shared-table>

    <!-- Row Menu Template -->
    <ng-template #actionButtonsTemplate let-row>
        <button mat-icon-button [matMenuTriggerFor]="menuRow">
            <mat-icon>more_horiz</mat-icon>
        </button>
        <mat-menu #menuRow="matMenu">
            <button mat-menu-item (click)="edit(row)">
                <mat-icon>edit</mat-icon>
                <span>Edit</span>
            </button>
            <button mat-menu-item [confirmDelete]="getRemoveCallback(row.id)">
                <mat-icon>delete</mat-icon>
                <span>Delete</span>
            </button>
        </mat-menu>
    </ng-template>

</div>